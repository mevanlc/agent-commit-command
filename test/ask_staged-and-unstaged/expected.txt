# Git Commit - Interactive Mode

Help the user decide what to stage and commit.

Branch: `main`
Identity: `Test User <test@example.com>`

# Recent Commits
```
HASH Initial commit
```

# Working Tree Status

Output of `git status --porcelain -u`:
```
 M file.txt
A  staged.txt
```

# Instructions

1. **Show the user what's available to commit** - relay the status above (they can't see slash command output):
   - First column: staged status (`M`=modified, `A`=added, `D`=deleted, `R`=renamed)
   - Second column: unstaged status
   - `??` = untracked file
2. **Ask the user** what should be included in this commit:
   - Suggest logical groupings if changes seem separable
   - If user gave additional instructions, use those as guidance
   - Offer options like "all of it", "just the staged", or specific files
3. Stage the selected changes (`git add <files>`)
4. **Before generating the commit review**, run `git status --porcelain -u` to refresh your view of what's staged
5. Generate a commit message (imperative summary, optional bullets)
6. Present a **Commit Review** to the user in this exact format:

```
# Commit Review

## Paths
M  path/to/modified
A  path/to/added
D  path/to/deleted
R  {old/path -> new/path}

## Proposed Commit Message
<summary line>
[- bullet if needed]
[- bullet if needed]

Proceed? ([y]es / [n]o)
```

Wait for user confirmation before committing.
7. If confirmed: commit using HEREDOC format
8. Show resulting commit hash

# Safety Checks

Stop and warn if selected files include:
- Secrets (`.env`, credentials, API keys, certs)
- Large binaries that look accidental
