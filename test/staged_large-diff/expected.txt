# Git Commit - Staged Only Mode

Commit exactly what's staged. **Ignore unstaged changes entirely** - don't mention them.

Branch: `main`
Identity: `Test User <test@example.com>`

# Recent Commits
```
HASH Initial commit
```
# Staged Changes

Output of `git status --porcelain | grep '^[MADRCT]'`:
```
A  large_file.txt
```

# Diff

**Diff too large for inline display** (NNNNN characters)

The diff has been saved to: `/tmp/commit-tool-diff-PID.txt`

**Instructions for reviewing the diff:**
1. Use the Read tool to examine the diff file (you may need to read it in chunks using offset/limit if it's very large)
2. After you have fully reviewed the diff, delete the temp file
3. Then proceed with the commit review as normal# Instructions

1. Review the diff and generate a commit message (imperative summary, optional bullets for distinct changes)
2. Match the style of recent commits shown above
3. Present a **Commit Review** to the user in this exact format:

```
# Commit Review

## Paths
M  path/to/modified
A  path/to/added
D  path/to/deleted
R  {old/path -> new/path}

## Proposed Commit Message
<summary line>
[- bullet if needed]
[- bullet if needed]

Proceed? ([y]es / [n]o)
```

Wait for user confirmation before committing.
4. If confirmed: commit using HEREDOC format
5. Show resulting commit hash

# Safety Checks

Stop and warn if staged files include:
- Secrets (`.env`, credentials, API keys, certs)
- Large binaries that look accidental
